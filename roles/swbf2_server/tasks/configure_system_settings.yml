---
# tasks file for configuring system settings (RDP, Performance, DEP)
- name: Enable Remote Desktop via registry
  ansible.windows.win_regedit:
    path: HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server
    name: fDenyTSConnections
    data: 0
    type: dword

- name: Set performance to "Adjust for best performance" for current user
  ansible.windows.win_regedit:
    path: HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\VisualEffects
    name: VisualFXSetting
    data: 2
    type: dword
  # Value 2 = "Adjust for best performance"
  # 0 = Let Windows choose, 1 = Adjust for best appearance, 2 = Adjust for best performance, 3 = Custom

- name: Set performance to "Adjust for best performance" for default user profile
  ansible.windows.win_regedit:
    path: HKU:\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Explorer\VisualEffects
    name: VisualFXSetting
    data: 2
    type: dword

- name: Disable window animations for best performance
  ansible.windows.win_regedit:
    path: HKCU:\Control Panel\Desktop\WindowMetrics
    name: MinAnimate
    data: "0"
    type: string

- name: Smooth edges of screen fonts
  ansible.windows.win_regedit:
    path: HKCU:\Control Panel\Desktop
    name: FontSmoothing
    data: "2"
    type: string

- name: Set processor scheduling to "Adjust for best performance of programs"
  ansible.windows.win_regedit:
    path: HKLM:\SYSTEM\CurrentControlSet\Control\PriorityControl
    name: Win32PrioritySeparation
    data: 0x28
    type: dword
  # Value 2 = "Adjust for best performance of programs"
  # Value 24 or 26 = "Adjust for best performance of background services"